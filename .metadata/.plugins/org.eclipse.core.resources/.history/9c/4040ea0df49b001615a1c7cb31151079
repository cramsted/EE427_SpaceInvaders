/*
 * audio.c
 *
 *  Created on: Oct 26, 2016
 *      Author: superman
 */
#include "audio.h"
#include "../xac97_l.h"
#include "xparameters.h"
#define TANK_EXPLOSION	0x1
#define TANK_FIRE_NOISE	0x2
#define UFO_NOISE		0x4
#define EXPLOSION_ALIEN	0x8
#define ALIEN_MOVEMENT	0x10

typedef struct{

} tankExplosion;


uint32_t audioEvents = 0;

void setAudioEvent(uint32_t event){
	audioEvents |= event;
}

void playAudio(){

}

void initAudio(){
	//resets the sound controller
	XAC97_HardReset(XPAR_AXI_AC97_0_BASEADDR);
	//waits until the codec can be written to
	XAC97_AwaitCodecReady(XPAR_AXI_AC97_0_BASEADDR);
	//enable different audio rates
	XAC97_WriteReg(XPAR_AXI_AC97_0_BASEADDR, AC97_ExtendedAudioStat,
			AC97_EXTENDED_AUDIO_CONTROL_VRA);
	//set to desired audio rate
	XAC97_WriteReg(XPAR_AXI_AC97_0_BASEADDR, AC97_PCM_DAC_Rate,
			AC97_PCM_RATE_11025_HZ);
	//set the volumes
	XAC97_WriteReg(XPAR_AXI_AC97_0_BASEADDR, AC97_MasterVol, AC97_VOL_MID);
	XAC97_WriteReg(XPAR_AXI_AC97_0_BASEADDR, AC97_AuxOutVol, AC97_VOL_MID);
	XAC97_WriteReg(XPAR_AXI_AC97_0_BASEADDR, AC97_MasterVolMono, AC97_VOL_MID);
	XAC97_WriteReg(XPAR_AXI_AC97_0_BASEADDR, AC97_PCBeepVol, AC97_VOL_MID);
	XAC97_WriteReg(XPAR_AXI_AC97_0_BASEADDR, AC97_PCMOutVol, AC97_VOL_MID);
	//clear the audio FIFO buffer
	XAC97_ClearFifos(XPAR_AXI_AC97_0_BASEADDR);
	//set the control bit to allow IN_FIFO interupts
	XAC97_mSetControl(XPAR_AXI_AC97_0_BASEADDR, AC97_ENABLE_IN_FIFO_INTERRUPT);
}
